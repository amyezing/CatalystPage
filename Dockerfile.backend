FROM gradle:8.8-jdk17 AS builder > Dockerfile.backend
WORKDIR /app >> Dockerfile.backend
COPY . . >> Dockerfile.backend
RUN ./gradlew :site:jvmJar --no-daemon >> Dockerfile.backend
. >> Dockerfile.backend
FROM eclipse-temurin:17-jre-jammy >> Dockerfile.backend
WORKDIR /app >> Dockerfile.backend
COPY --from=builder /app/site/build/libs/catalystpage.com.jar app.jar >> Dockerfile.backend
EXPOSE 8080 >> Dockerfile.backend
CMD ["java", "-jar", "app.jar"] >> Dockerfile.backend